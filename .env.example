# Drama LLM Environment Configuration
# Copy this file to .env and update with your values

# ============================================
# Frontend Configuration (Vite)
# ============================================

# Backend API URL - Used by frontend to connect to backend
VITE_API_URL=http://localhost:3001/api

# Ollama server URL - Used by frontend for LLM interactions
VITE_OLLAMA_URL=http://localhost:11434

# Vite development server port (default: 5173)
VITE_PORT=5173

# Enable Vite HMR (Hot Module Replacement)
VITE_HMR=true

# ============================================
# Database Configuration (Docker PostgreSQL)
# ============================================

# PostgreSQL host
# - Use 'localhost' for local development
# - Use 'postgres' when running backend in Docker
DB_HOST=localhost

# PostgreSQL port
# - Docker default: 5433 (mapped from container's 5432)
# - Local PostgreSQL: 5432
DB_PORT=5433

# Database name
DB_NAME=drama_llm

# Database user
# - Docker default: postgres
# - Local: your PostgreSQL username
DB_USER=postgres

# Database password
# - Docker default: postgres
# - Local: your PostgreSQL password
# ⚠️ Change this in production!
DB_PASSWORD=postgres

# Enable SSL for database connection
# - Development: false
# - Production: true (recommended)
DB_SSL=false

# ============================================
# Docker Configuration
# ============================================

# Frontend container port (for production preview)
FRONTEND_PORT=4173

# Backend container port
BACKEND_PORT=3001

# Ollama container port (if running Ollama in Docker)
OLLAMA_PORT=11434

# Skip database initialization in Docker
SKIP_DB_INIT=false

# ============================================
# Security & Authentication
# ============================================

# JWT secret for signing authentication tokens
# ⚠️ IMPORTANT: Generate a secure random string for production!
# Generate with: openssl rand -hex 32
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration time
# Format: Xd (days), Xh (hours), Xm (minutes), Xs (seconds)
JWT_EXPIRES_IN=7d

# Session expiration time (in seconds)
# 604800 = 7 days
SESSION_EXPIRES_IN=604800

# Number of bcrypt salt rounds for password hashing
# Higher = more secure but slower
# Development: 10, Production: 12-14
BCRYPT_ROUNDS=10

# ============================================
# CORS Configuration
# ============================================

# Allowed origins for CORS requests (comma-separated)
# Add your frontend URLs here
CORS_ORIGIN=http://localhost:5173
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:4173

# ============================================
# Server Configuration
# ============================================

# Node environment
# Options: development, production, test
NODE_ENV=development

# Server host
# - localhost: Local only
# - 0.0.0.0: All network interfaces
HOST=localhost

# Server port
PORT=3001

# ============================================
# Logging Configuration
# ============================================

# Log level
# Options: error, warn, info, debug, verbose
LOG_LEVEL=info

# Log file path
LOG_FILE=logs/app.log

# Maximum log file size before rotation
LOG_MAX_SIZE=10m

# Maximum number of log files to keep
LOG_MAX_FILES=5

# ============================================
# Rate Limiting
# ============================================

# Rate limit time window in milliseconds
# 900000 = 15 minutes
RATE_LIMIT_WINDOW_MS=900000

# Maximum requests per time window
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# Ollama Configuration
# ============================================

# Ollama server URL for backend
OLLAMA_HOST=http://localhost:11434

# Request timeout for Ollama API calls (milliseconds)
# 300000 = 5 minutes
OLLAMA_TIMEOUT=300000

# ============================================
# Feature Flags
# ============================================

# Enable user registration
ENABLE_REGISTRATION=true

# Enable password reset functionality
ENABLE_PASSWORD_RESET=false

# Require email verification for new accounts
REQUIRE_EMAIL_VERIFICATION=false

# ============================================
# Admin Configuration
# ============================================

# Default admin user email
ADMIN_EMAIL=admin@drama-llm.local

# Default admin user password
# ⚠️ CHANGE THIS IMMEDIATELY AFTER FIRST LOGIN!
ADMIN_PASSWORD=admin123

# ============================================
# Production Configuration Example
# ============================================
# Uncomment and modify these for production deployment:

# NODE_ENV=production
# VITE_API_URL=https://api.yourdomain.com/api
# VITE_OLLAMA_URL=https://ollama.yourdomain.com
# DB_HOST=your-production-db-host.com
# DB_PORT=5432
# DB_PASSWORD=strong-secure-password-here
# DB_SSL=true
# JWT_SECRET=generate-with-openssl-rand-hex-32
# CORS_ORIGIN=https://yourdomain.com
# ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# LOG_LEVEL=warn
# BCRYPT_ROUNDS=12
# RATE_LIMIT_MAX_REQUESTS=50
# HOST=0.0.0.0

# ============================================
# Notes
# ============================================

# 1. Copy this file to .env:
#    cp .env.example .env

# 2. Update values in .env (don't edit .env.example)

# 3. Never commit .env to version control!
#    (.env is already in .gitignore)

# 4. For Docker setup (recommended):
#    - Use DB_PORT=5433
#    - Use DB_USER=postgres
#    - Use DB_PASSWORD=postgres
#    - Run: make quick-docker-db

# 5. For local PostgreSQL:
#    - Use DB_PORT=5432
#    - Use your PostgreSQL username/password
#    - Run: make db-init

# 6. Generate secure JWT_SECRET:
#    openssl rand -hex 32

# 7. See documentation:
#    - server/ENV_VARIABLES.md (detailed env var docs)
#    - server/SETUP_GUIDE.md (setup instructions)
#    - docs/USER_REGISTRATION.md (registration feature)
